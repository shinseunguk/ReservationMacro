# 🤖 축구장 예약 매크로
## 프로젝트 소개

- Selenium과 Python을 사용하여 특정 웹사이트에 예약 작업을 자동화 했습니다. 사용자는 로그인 후 예약 페이지로 이동하여, 선택한 날짜와 시간에 맞춰 원하는 예약을 자동으로 수행할 수 있습니다.

<br>

## 팀원 구성

<div align="center">

| **신승욱** |
| :------: |
| [<img src="https://avatars.githubusercontent.com/u/69791286?v=4" height=150 width=150> <br/> @shinseunguk](https://github.com/shinseunguk) |

</div>

<br>

## 1. 개발 환경

- Front : N/A
- Back-end : N/A
- 버전 및 이슈관리 : Github, Github Issues, Github Project
- 협업 툴 : N/A
- Library : Selenium, ChromeDriverManager
- 서비스 배포 환경 : 로컬 구동
<br>

## 2. 채택한 개발 기술과 브랜치 전략

### Selenium WebDriver

- **Selenium WebDriver**는 웹 브라우저를 제어할 수 있는 자동화 도구입니다. 이 프로젝트에서는 웹사이트의 로그인과 예약 과정을 자동화하기 위해 Selenium WebDriver를 사용했습니다.
  - **자동화 목적**: 반복적인 작업을 줄이고, 예약 시스템을 정확하고 빠르게 이용할 수 있도록 자동화했습니다.
  - **브라우저 제어**: `webdriver.Chrome`과 같은 WebDriver 객체를 통해 브라우저를 열고, 특정 URL에 접근하거나 요소를 제어하는 등의 작업을 수행했습니다.
  - **페이지 로딩 대기**: `WebDriverWait`과 `expected_conditions`를 사용하여 페이지가 완전히 로드되기를 기다린 후 작업을 수행함으로써, 오류 발생 가능성을 줄였습니다.

### Python Enum

- **Enum 클래스**는 설정 값을 관리하고, 상수를 정의하는 데 사용되었습니다. 예를 들어, 사용자 ID, 비밀번호, 로그인 URL 등 변경되지 않는 값들을 `Constants` 클래스로 정의하여, 코드에서 일관성 있게 사용할 수 있었습니다.
  - **가독성 향상**: 상수 값들이 모듈화되어 있어 코드의 가독성과 유지보수성이 높아졌습니다.
  - **유지보수 용이성**: 설정 파일(`config.json`)에서 필요한 설정을 로드해 Enum으로 관리함으로써, 코드 수정 없이 설정 파일만 업데이트하면 변경 사항을 적용할 수 있습니다.

### WebDriverManager

- **WebDriverManager**는 ChromeDriver와 같은 브라우저 드라이버를 자동으로 관리해주는 라이브러리입니다.
  - **환경 설정 간소화**: 로컬 환경에서 브라우저 드라이버를 수동으로 다운로드하고 설정할 필요 없이, WebDriverManager가 자동으로 최신 버전을 관리해줍니다.
  - **호환성**: 프로젝트를 실행하는 시스템에 적합한 드라이버 버전을 자동으로 설치해줌으로써, 브라우저와의 호환성을 유지합니다.

### 페이지 대기 및 요소 조작

- **시간 대기 및 동작 타이밍 조정**: `wait_until` 함수는 특정 시간(예: 오전 10시)까지 대기한 후 작업을 수행하도록 설계되었습니다. 이를 통해 예약 시간에 맞춰 작업을 정확하게 수행할 수 있습니다.
  - **동적 대기**: `WebDriverWait`과 같은 도구를 사용하여 페이지 로딩이 완료되거나 특정 요소가 활성화될 때까지 대기함으로써, 타이밍 문제로 인한 오류를 방지했습니다.

### 예외 처리 및 반복 시도

- **자동화 신뢰성 향상**: 예외가 발생하거나 요소가 발견되지 않았을 때, 루프를 통해 다시 시도하도록 설계했습니다. 이는 예약 과정에서 발생할 수 있는 예상치 못한 상황에 유연하게 대응할 수 있도록 돕습니다.
  - **페이지 새로고침 및 재시도**: 예약 시간이 가까워졌을 때 특정 체크박스가 나타날 때까지 페이지를 새로고침하며 반복적으로 시도하는 방식으로, 예약 경쟁이 치열한 상황에서도 성공률을 높였습니다.

## 브랜치 전략

- **Gitflow**를 채택하여 프로젝트를 진행했습니다.



<br>

## 3. 프로젝트 구조

```
./
    config.json
    README.md
    list_project_structure.py
    main.py
```

<br>

## 4. 역할 분담

### 🧑🏻‍💻신승욱

1. **로그인**
   - 사용자의 아이디와 비밀번호를 입력하여 웹 애플리케이션에 로그인합니다.

2. **예약 준비**
   - 예약 페이지에 접속하여 특정 날짜와 시간에 대한 예약 준비를 진행합니다.
     - '오늘 하루 안보기' 버튼 클릭
     - 특정 센터 선택
     - 조회 버튼 클릭
     - 다음 달 링크 클릭
     - 특정 날짜 선택
     - 지정된 시간까지 대기
     - 예약 시간 체크박스 선택

3. **예약 신청**
   - 예약 신청 페이지에서 다음 정보를 입력합니다:
     - 인원수
     - 목적
   - 이용 약관에 동의하여 예약을 완료합니다.


## 5. 개발 기간 및 작업 관리

### 개발 기간

- 전체 개발 기간 : 2024-08-07 ~ 2022-09-04
- 기능 구현 : 2024-08-07 ~ 2022-09-04

<br>

### 작업 관리

- GitHub Issue를 통해 Issue를 관리했습니다.

<br>

## 6. 신경 쓴 부분

- html 태그의 id 및 class를 이용하여 10시에 자동으로 예약이 진행되게 신경 씀
- 10시 정각에 새로고침을 해도 진행을 위한 체크박스가 뜨질 않을때도 있는데 해당 코드로 완벽 대응
```
# 08:00 ~ 10:00 체크박스 선택
    while True:
        driver.refresh()  # 페이지 새로고침
        try:
            checkbox = WebDriverWait(driver, 0.5).until(
                EC.element_to_be_clickable((By.ID, "checkbox_time_1"))
            )
            checkbox.click()
            print("Checkbox clicked successfully!")
            break  # 체크박스가 발견되면 루프 종료
        except:
            print("Checkbox not found, refreshing the page...")
```
- 개인정보인 아이디, 비밀번호를 config.json을 따로 만들어 .gitignore에 등록해 외부에 노출되지 않도록 구현 (악용을 방지하여 추가적으로 홈페이지 URL도 은닉)
<img width="836" alt=" 2024-09-05 오후 1 46 30" src="https://github.com/user-attachments/assets/34452807-a151-484d-9e0e-3cfc85af925f">


<br>

## 7. 개선 목표

- recaptcha '로봇이 아닙니다.'를 우회하는 방법을 찾았으나 큰 방법은 없어 대응하지 못하였음.
    
<br>

## 8. 프로젝트 후기

### 🧑🏻‍💻 신승욱

- Python을 처음 사용하여 간단히 만들어본 프로젝트 옛날 풀스택 개발자 시절이 새록새록 떠오르기도 하고 나쁘지 않았던 경험 인 것 같다. <br>
무엇보다 축구팀 주장이 예약하는데 있어서 큰 어려움을 겪고 있었는데 코딩으로 지인들을 도울수 있다는게 참 좋았다.

<br>

